{"ast":null,"code":"import _slicedToArray from\"/Users/jaredtruong/Desktop/Spring2021/ypool/git/ypool/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{FooterContainer}from'../../../containers/footer';import Navbar from'../../Navbar/Navbar';import axios from'axios';import{Button}from'../../Button/Button';import{useHistory}from\"react-router-dom\";import'./RideStatus.css';//To Do\n//Get the request new ride button out\n//Gonna have to write different table functions for different types of data\n//api key header\nimport{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function GroupInfo(props){var groupId={'groupId':props.groupId};var header=props.header;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),info=_useState2[0],setInfo=_useState2[1];useEffect(function(){axios.post(\"https://yalepool.com/get-group-info\",groupId,{headers:header}).then(function(response){setInfo(response);}).catch(function(error){console.log(error);});},[]);if(!info){return/*#__PURE__*/_jsx(_Fragment,{});}else{var members=info.data.names;var departureDate=info.data.departureDate;var departureTime=info.data.departureTime;var destinations=info.data.destinations;var origins=info.data.origins;var orgKey=0;var destKey=0;var memKey=0;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"td\",{className:\"match_td_right\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Match Info\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Origins:\"}),origins.map(function(org){return/*#__PURE__*/_jsx(\"p\",{children:org[0]},orgKey++);}),/*#__PURE__*/_jsx(\"p\",{children:\"Destinations:\"}),destinations.map(function(dest){return/*#__PURE__*/_jsx(\"p\",{children:dest[0]},destKey++);}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Departure Date: \",departureDate]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Departure Time: \",departureTime]})]}),/*#__PURE__*/_jsxs(\"td\",{className:\"match_td\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Group Members\"}),members.map(function(mem){return/*#__PURE__*/_jsx(\"p\",{children:mem},memKey++);})]})]});}}function DecisionBox(props){var data={'netId':props.netId,'requestId':props.requestId};var header=props.header;var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),result=_useState4[0],setResponse=_useState4[1];function accept(e){e.preventDefault();axios.post(\"https://yalepool.com/confirm-match\",data,{headers:header}).then(function(response){setResponse(response);}).catch(function(error){console.log(error);});}function decline(e){e.preventDefault();axios.post(\"https://yalepool.com/decline-match\",data,{headers:header}).then(function(response){setResponse(response);}).catch(function(error){console.log(error);});}if(result){props.update();}if(props.needClick){return/*#__PURE__*/_jsx(\"table\",{children:/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Button,{buttonSize:\"btn--small\",buttonColor:\"blue\",onClick:accept,children:\"Accept\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Button,{buttonSize:\"btn--small\",buttonColor:\"blue\",onClick:decline,children:\"Decline\"})})]})})});}else{return/*#__PURE__*/_jsx(\"div\",{});}}function MatchTable(props){var trips=props.trips;if(trips.length!==0){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"table_div\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"category\",children:props.title}),trips.map(function(trip){return/*#__PURE__*/_jsx(\"div\",{style:{paddingBottom:\"10px\"},children:/*#__PURE__*/_jsx(\"table\",{className:\"match_table\",children:/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{className:\"match_td_right\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"td_title\",children:\"Request Info\"}),/*#__PURE__*/_jsxs(\"p\",{children:[trip.origin,\" to \",trip.destination]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Departure Date: \",trip.date]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Preferred Departure Time: \",trip.time]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Preferred Group Size: \",trip.preferred_group_size]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Preferred Car Type: \",trip.preferred_car_type]})]}),/*#__PURE__*/_jsx(GroupInfo,{header:props.header,groupId:trip.groupId}),props.needClick&&/*#__PURE__*/_jsx(\"td\",{className:\"match_td_left\",children:/*#__PURE__*/_jsx(DecisionBox,{header:props.header,update:props.update,needClick:props.needClick,netId:trip.netId,requestId:trip.requestId})})]})})},trip.groupId)});})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"table_hr\"})]});}else{return/*#__PURE__*/_jsx(\"div\",{});}}function WaitingTable(props){var requests=props.trips;if(requests.length!=0){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"table_div\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"category\",children:props.title}),requests.map(function(request){return/*#__PURE__*/_jsx(\"table\",{className:\"match_table\",children:/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsxs(\"td\",{className:\"request_td\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Request Info\"}),/*#__PURE__*/_jsxs(\"p\",{children:[request.origin,\" to \",request.destination]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Departure Date: \",request.date]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Preferred Departure Time: \",request.time]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Preferred Group Size: \",request.preferred_group_size]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Preferred Car Type: \",request.preferred_car_type]})]})})})},request.groupId);})]})});}else{return/*#__PURE__*/_jsx(\"div\",{});}}function RideStatus(props){var netId={'netId':props.netId};var header={'api_key':props.apiKey};var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),data=_useState6[0],setData=_useState6[1];function update(){//pass the netid to the api call\naxios.post(\"https://yalepool.com/get-request-status\",netId,{headers:header}).then(function(response){setData(response);//set it!\n}).catch(function(error){console.log(\"Error: \".concat(error));});}useEffect(function(){update();},[]);//These arrays will hold our types of trips\nvar finalizedGroup=[];var awaitingUserConf=[];var awaitingOtherConf=[];var awaitingMatch=[];if(data){data.data.forEach(function(trip){if(trip.allConfirmed){finalizedGroup.push(trip);}else if(trip.confirmed){awaitingOtherConf.push(trip);}else if(trip.matched&&!trip.confirmed){awaitingUserConf.push(trip);}else if(!trip.matched){awaitingMatch.push(trip);}});}//Give option to request a new ride\nvar history=useHistory();function GoToRequest(e){e.preventDefault();history.push('request');}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(MatchTable,{header:header,trips:finalizedGroup,update:update,title:\"Confirmed Matches\",needClick:false}),/*#__PURE__*/_jsx(MatchTable,{header:header,trips:awaitingUserConf,update:update,title:\"Finalized Matches\",needClick:true}),/*#__PURE__*/_jsx(MatchTable,{header:header,trips:awaitingOtherConf,update:update,title:\"Awaiting Others' Confirmation\",needClick:false}),/*#__PURE__*/_jsx(WaitingTable,{header:header,trips:awaitingMatch,title:\"Waiting To Be Matched\"}),/*#__PURE__*/_jsx(\"div\",{className:\"center_button\",children:/*#__PURE__*/_jsx(Button,{buttonColor:\"blue\",onClick:GoToRequest,className:\"center_button\",children:\"Click Here To Request A Ride\"})}),/*#__PURE__*/_jsx(FooterContainer,{})]});}export default RideStatus;","map":{"version":3,"sources":["/Users/jaredtruong/Desktop/Spring2021/ypool/git/ypool/web/src/components/pages/RideStatus/RideStatus.js"],"names":["React","useEffect","useState","FooterContainer","Navbar","axios","Button","useHistory","GroupInfo","props","groupId","header","info","setInfo","post","headers","then","response","catch","error","console","log","members","data","names","departureDate","departureTime","destinations","origins","orgKey","destKey","memKey","map","org","dest","mem","DecisionBox","netId","requestId","result","setResponse","accept","e","preventDefault","decline","update","needClick","MatchTable","trips","length","title","trip","paddingBottom","origin","destination","date","time","preferred_group_size","preferred_car_type","WaitingTable","requests","request","RideStatus","apiKey","setData","finalizedGroup","awaitingUserConf","awaitingOtherConf","awaitingMatch","forEach","allConfirmed","push","confirmed","matched","history","GoToRequest"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { FooterContainer } from '../../../containers/footer';\nimport Navbar from '../../Navbar/Navbar';\nimport axios from 'axios';\nimport {Button} from '../../Button/Button';\nimport { useHistory } from \"react-router-dom\";\nimport './RideStatus.css';\n\n//To Do\n    //Get the request new ride button out\n    //Gonna have to write different table functions for different types of data\n\n//api key header\n\nfunction GroupInfo(props) {\n    let groupId = {'groupId' : props.groupId}\n    let header = props.header\n    const [info, setInfo] = useState(null)\n\n    useEffect(() =>{\n        axios.post(\"https://yalepool.com/get-group-info\", groupId, {headers: header})\n            .then(response =>{\n                setInfo(response)\n            })\n            .catch(error =>{\n                console.log(error)\n            })\n    }, [])\n    if(!info){\n        return(\n            <>\n            </>\n        )\n    }\n    else{\n        let members = info.data.names\n        let departureDate = info.data.departureDate\n        let departureTime = info.data.departureTime\n        let destinations = info.data.destinations\n        let origins = info.data.origins\n        let orgKey = 0\n        let destKey = 0\n        let memKey = 0\n        return(\n            <>\n                <td className=\"match_td_right\">\n                    <h3>Match Info</h3>\n                    <p>Origins:</p>\n                    {origins.map(org => \n                        <p key={orgKey++}>{org[0]}</p>\n                    )}\n                    <p>Destinations:</p>\n                    {destinations.map(dest => \n                        <p key={destKey++}>{dest[0]}</p>\n                    )}\n                    <p>Departure Date: {departureDate}</p>\n                    <p>Departure Time: {departureTime}</p>\n                </td>\n                <td className=\"match_td\">\n                    <h3>Group Members</h3>\n                    {members.map(mem => \n                        <p key={memKey++}>{mem}</p>\n                    )}\n                </td>\n            </>\n        )\n    }\n\n}\n\nfunction DecisionBox(props) {\n\n    let data = {'netId':props.netId, 'requestId':props.requestId}\n    let header = props.header\n    const [result, setResponse] = useState(null)\n\n    function accept(e) {\n        e.preventDefault()\n        axios.post(\"https://yalepool.com/confirm-match\", data, {headers: header})\n            .then(response => {\n                setResponse(response)\n            })\n            .catch(error => {\n                console.log(error)\n            })\n    }\n\n    function decline(e) {\n        e.preventDefault()\n        axios.post(\"https://yalepool.com/decline-match\", data, {headers: header})\n        .then(response => {\n            setResponse(response)\n        })\n        .catch(error => {\n            console.log(error)\n        })\n    }\n\n    if(result){\n        props.update()\n    }\n    if(props.needClick){\n        return(\n            <table>\n                <tbody>\n                    <tr>\n                        <td>\n                            <Button \n                                buttonSize=\"btn--small\"\n                                buttonColor=\"blue\"\n                                onClick={accept}\n                            >\n                                Accept\n                            </Button>\n                        </td>\n                        <td>\n                            <Button \n                                buttonSize=\"btn--small\"\n                                buttonColor=\"blue\"\n                                onClick={decline}\n                            >\n                                Decline\n                            </Button>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        )\n    }\n    else{\n        return(\n            <div></div>\n        )\n    }\n}\n\nfunction MatchTable(props) {\n\n\n    let trips = props.trips\n    if(trips.length !== 0){\n        return(\n            <div>\n                <div className='table_div'>\n                <h1 className='category'>{props.title}</h1>\n                    {trips.map(trip =>\n                    <div style={{paddingBottom: \"10px\"}}>\n                    <table key={trip.groupId} className=\"match_table\">\n                        <tbody>\n                            <tr>\n                                <td className=\"match_td_right\">\n                                <h3 className=\"td_title\">Request Info</h3> \n                                <p>{trip.origin} to {trip.destination}</p>\n                                <p>Departure Date: {trip.date}</p>\n                                <p>Preferred Departure Time: {trip.time}</p>\n                                <p>Preferred Group Size: {trip.preferred_group_size}</p>\n                                <p>Preferred Car Type: {trip.preferred_car_type}</p>\n                                </td>\n                                <GroupInfo header={props.header} groupId ={trip.groupId}/>\n                                {props.needClick &&                                 \n                                    <td className=\"match_td_left\">\n                                        <DecisionBox header={props.header} update={props.update} needClick={props.needClick} netId={trip.netId} requestId={trip.requestId}/>\n                                    </td>\n                                }\n                            </tr>\n                        </tbody>\n                    </table>\n                    </div>)}\n                </div>\n                <hr className=\"table_hr\"/>\n            </div>\n        )\n    }\n    else{\n        return(\n            <div>\n            </div>\n        )\n    }\n}\n\nfunction WaitingTable(props) {\n    \n    let requests = props.trips\n    if(requests.length != 0){\n        return(\n        <div>\n            <div className='table_div'>\n            <h1 className='category'>{props.title}</h1>\n            {requests.map(request =>\n                <table key={request.groupId} className=\"match_table\">\n                    <tbody>\n                        <tr>\n                            <td className=\"request_td\">\n                                <h3>Request Info</h3> \n                                <p>{request.origin} to {request.destination}</p>\n                                <p>Departure Date: {request.date}</p>\n                                <p>Preferred Departure Time: {request.time}</p>\n                                <p>Preferred Group Size: {request.preferred_group_size}</p>\n                                <p>Preferred Car Type: {request.preferred_car_type}</p>\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>)}\n            </div>\n        </div>\n        )\n    }\n    else{\n        return(\n            <div>\n            </div>\n        )\n    }\n}\n\nfunction RideStatus(props) {\n\n    var netId = {'netId' : props.netId}\n    var header = {'api_key': props.apiKey}\n\n    const [data, setData] = useState(null)\n\n    function update() {\n        //pass the netid to the api call\n        axios.post(\"https://yalepool.com/get-request-status\", netId, {headers: header})\n            .then(response => {\n                setData(response) //set it!\n            })\n            .catch(error => {\n                console.log(`Error: ${error}`)\n            })\n    }\n\n    useEffect(() => {\n        update()\n    }, [])\n    //These arrays will hold our types of trips\n    let finalizedGroup = []\n    let awaitingUserConf = []\n    let awaitingOtherConf = []\n    let awaitingMatch = []\n    if(data){\n        data.data.forEach(trip =>{\n            if(trip.allConfirmed){\n                finalizedGroup.push(trip)\n            }\n            else if(trip.confirmed){\n                awaitingOtherConf.push(trip)\n            }\n            else if(trip.matched && !trip.confirmed){\n                awaitingUserConf.push(trip)\n            }\n            else if(!trip.matched){\n                awaitingMatch.push(trip)\n            }\n        })\n    }\n\n    //Give option to request a new ride\n    let history = useHistory()\n    function GoToRequest(e){\n        e.preventDefault()\n        history.push('request')\n    }\n\n    return(\n        <div>\n            <Navbar />\n                <MatchTable header={header} trips={finalizedGroup} update={update} title=\"Confirmed Matches\" needClick={false}/>\n                <MatchTable header={header} trips={awaitingUserConf} update={update} title=\"Finalized Matches\" needClick={true}/>\n                <MatchTable header={header} trips={awaitingOtherConf} update={update} title=\"Awaiting Others' Confirmation\" needClick={false}/>\n                <WaitingTable header={header} trips={awaitingMatch} title=\"Waiting To Be Matched\"/>\n                <div className=\"center_button\">\n                <Button buttonColor=\"blue\" onClick={GoToRequest} className=\"center_button\">Click Here To Request A Ride</Button>\n                </div>\n            <FooterContainer/>\n        </div>\n    )\n}\n\nexport default RideStatus"]},"metadata":{},"sourceType":"module"}