{"ast":null,"code":"import _slicedToArray from\"/Users/jaredtruong/Desktop/Spring2021/ypool/git/ypool/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{FooterContainer}from\"../../../containers/footer\";import Navbar from\"../../Navbar/Navbar\";import axios from\"axios\";import{Button}from\"../../Button/Button\";import{useHistory}from\"react-router-dom\";import\"./RideStatus.css\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function GroupInfo(props){var groupId={groupId:props.groupId};var header=props.header;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),info=_useState2[0],setInfo=_useState2[1];useEffect(function(){axios.post(\"https://yalepool.com/get-group-info\",groupId,{headers:header}).then(function(response){setInfo(response);}).catch(function(error){console.log(error);});},[]);if(!info){return/*#__PURE__*/_jsx(_Fragment,{});}else{var members=info.data.names;var departureDate=info.data.departureDate;var departureTime=info.data.departureTime;var destinations=info.data.destinations;var origins=info.data.origins;var orgKey=0;var destKey=0;var memKey=0;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"td\",{className:\"match_td_right\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Match Info\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Origins:\"}),origins.map(function(org){return/*#__PURE__*/_jsx(\"p\",{children:org[0]},orgKey++);}),/*#__PURE__*/_jsx(\"p\",{children:\"Destinations:\"}),destinations.map(function(dest){return/*#__PURE__*/_jsx(\"p\",{children:dest[0]},destKey++);}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Departure Date: \",departureDate]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Departure Time: \",departureTime]})]}),/*#__PURE__*/_jsxs(\"td\",{className:\"match_td\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Group Members\"}),members.map(function(mem){return/*#__PURE__*/_jsx(\"p\",{children:mem},memKey++);})]})]});}}function DecisionBox(props){var data={netId:props.netId,requestId:props.requestId};var header=props.header;var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),result=_useState4[0],setResponse=_useState4[1];function accept(e){e.preventDefault();axios.post(\"https://yalepool.com/confirm-match\",data,{headers:header}).then(function(response){setResponse(response);}).catch(function(error){console.log(error);});}function decline(e){e.preventDefault();axios.post(\"https://yalepool.com/decline-match\",data,{headers:header}).then(function(response){setResponse(response);}).catch(function(error){console.log(error);});}if(result){props.update();}if(props.needClick){return/*#__PURE__*/_jsx(\"table\",{children:/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Button,{buttonSize:\"btn--small\",buttonColor:\"blue\",onClick:accept,children:\"Accept\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Button,{buttonSize:\"btn--small\",buttonColor:\"blue\",onClick:decline,children:\"Decline\"})})]})})});}else{return/*#__PURE__*/_jsx(\"div\",{});}}function MatchTable(props){var trips=props.trips;if(trips.length!==0){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"table_div\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"category\",children:props.title}),trips.map(function(trip){return/*#__PURE__*/_jsx(\"div\",{style:{paddingBottom:\"10px\"},children:/*#__PURE__*/_jsx(\"table\",{className:\"match_table\",children:/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{className:\"match_td_right\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"td_title\",children:\"Request Info\"}),/*#__PURE__*/_jsxs(\"p\",{children:[trip.origin,\" to \",trip.destination]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Departure Date: \",trip.date]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Preferred Departure Time: \",trip.time]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Preferred Group Size: \",trip.preferred_group_size]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Preferred Car Type: \",trip.preferred_car_type]})]}),/*#__PURE__*/_jsx(GroupInfo,{header:props.header,groupId:trip.groupId}),props.needClick&&/*#__PURE__*/_jsx(\"td\",{className:\"match_td_left\",children:/*#__PURE__*/_jsx(DecisionBox,{header:props.header,update:props.update,needClick:props.needClick,netId:trip.netId,requestId:trip.requestId})})]})})},trip.groupId)});})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"table_hr\"})]});}else{return/*#__PURE__*/_jsx(\"div\",{});}}function WaitingTable(props){var requests=props.trips;if(requests.length!==0){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"table_div\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"category\",children:props.title}),requests.map(function(request){return/*#__PURE__*/_jsx(\"table\",{className:\"match_table\",children:/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsxs(\"td\",{className:\"request_td\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Request Info\"}),/*#__PURE__*/_jsxs(\"p\",{children:[request.origin,\" to \",request.destination]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Departure Date: \",request.date]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Preferred Departure Time: \",request.time]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Preferred Group Size: \",request.preferred_group_size]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Preferred Car Type: \",request.preferred_car_type]})]})})})},request.groupId);})]})});}else{return/*#__PURE__*/_jsx(\"div\",{});}}function RideStatus(props){var netId={netId:props.netId};var header={api_key:props.apiKey};var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),data=_useState6[0],setData=_useState6[1];function update(){//pass the netid to the api call\naxios.post(\"https://yalepool.com/get-request-status\",netId,{headers:header}).then(function(response){setData(response);//set it!\n}).catch(function(error){console.log(\"Error: \".concat(error));});}useEffect(function(){update();},[]);//These arrays will hold our types of trips\nvar finalizedGroup=[];var awaitingUserConf=[];var awaitingOtherConf=[];var awaitingMatch=[];if(data){data.data.forEach(function(trip){if(trip.allConfirmed){finalizedGroup.push(trip);}else if(trip.confirmed){awaitingOtherConf.push(trip);}else if(trip.matched&&!trip.confirmed){awaitingUserConf.push(trip);}else if(!trip.matched){awaitingMatch.push(trip);}});}//Give option to request a new ride\nvar history=useHistory();function GoToRequest(e){e.preventDefault();history.push(\"request\");}//pending your conf, pending others conf\nif(finalizedGroup.length==0&&awaitingOtherConf.length==0&&awaitingUserConf.length==0&&awaitingMatch.length==0){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"img\",{className:\"status-img\",src:\"images/exclamation_point_sign.png\",alt:\"dashboard\"}),/*#__PURE__*/_jsx(\"div\",{className:\"center_button\",children:/*#__PURE__*/_jsx(Button,{buttonColor:\"blue\",onClick:GoToRequest,className:\"center_button\",children:\"Click Here To Request A Ride\"})})]});}else{return/*#__PURE__*/_jsxs(\"div\",{className:\"flex-wrapper\",children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(MatchTable,{header:header,trips:finalizedGroup,update:update,title:\"Finalized Matches\",needClick:false}),/*#__PURE__*/_jsx(MatchTable,{header:header,trips:awaitingUserConf,update:update,title:\"Pending Your Confirmation\",needClick:true}),/*#__PURE__*/_jsx(MatchTable,{header:header,trips:awaitingOtherConf,update:update,title:\"Pending Others' Confirmation\",needClick:false}),/*#__PURE__*/_jsx(WaitingTable,{header:header,trips:awaitingMatch,title:\"Waiting To Be Matched\"}),/*#__PURE__*/_jsx(\"div\",{className:\"center_button\",children:/*#__PURE__*/_jsx(Button,{buttonColor:\"blue\",onClick:GoToRequest,className:\"center_button\",children:\"Click Here To Request A Ride\"})}),/*#__PURE__*/_jsx(FooterContainer,{})]});}}export default RideStatus;","map":{"version":3,"sources":["/Users/jaredtruong/Desktop/Spring2021/ypool/git/ypool/web/src/components/pages/RideStatus/RideStatus.js"],"names":["React","useEffect","useState","FooterContainer","Navbar","axios","Button","useHistory","GroupInfo","props","groupId","header","info","setInfo","post","headers","then","response","catch","error","console","log","members","data","names","departureDate","departureTime","destinations","origins","orgKey","destKey","memKey","map","org","dest","mem","DecisionBox","netId","requestId","result","setResponse","accept","e","preventDefault","decline","update","needClick","MatchTable","trips","length","title","trip","paddingBottom","origin","destination","date","time","preferred_group_size","preferred_car_type","WaitingTable","requests","request","RideStatus","api_key","apiKey","setData","finalizedGroup","awaitingUserConf","awaitingOtherConf","awaitingMatch","forEach","allConfirmed","push","confirmed","matched","history","GoToRequest"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { FooterContainer } from \"../../../containers/footer\";\nimport Navbar from \"../../Navbar/Navbar\";\nimport axios from \"axios\";\nimport { Button } from \"../../Button/Button\";\nimport { useHistory } from \"react-router-dom\";\nimport \"./RideStatus.css\";\n\nfunction GroupInfo(props) {\n  let groupId = { groupId: props.groupId };\n  let header = props.header;\n  const [info, setInfo] = useState(null);\n\n  useEffect(() => {\n    axios\n      .post(\"https://yalepool.com/get-group-info\", groupId, { headers: header })\n      .then((response) => {\n        setInfo(response);\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  }, []);\n  if (!info) {\n    return <></>;\n  } else {\n    let members = info.data.names;\n    let departureDate = info.data.departureDate;\n    let departureTime = info.data.departureTime;\n    let destinations = info.data.destinations;\n    let origins = info.data.origins;\n    let orgKey = 0;\n    let destKey = 0;\n    let memKey = 0;\n    return (\n      <>\n        <td className=\"match_td_right\">\n          <h3>Match Info</h3>\n          <p>Origins:</p>\n          {origins.map((org) => (\n            <p key={orgKey++}>{org[0]}</p>\n          ))}\n          <p>Destinations:</p>\n          {destinations.map((dest) => (\n            <p key={destKey++}>{dest[0]}</p>\n          ))}\n          <p>Departure Date: {departureDate}</p>\n          <p>Departure Time: {departureTime}</p>\n        </td>\n        <td className=\"match_td\">\n          <h3>Group Members</h3>\n          {members.map((mem) => (\n            <p key={memKey++}>{mem}</p>\n          ))}\n        </td>\n      </>\n    );\n  }\n}\n\nfunction DecisionBox(props) {\n  let data = { netId: props.netId, requestId: props.requestId };\n  let header = props.header;\n  const [result, setResponse] = useState(null);\n\n  function accept(e) {\n    e.preventDefault();\n    axios\n      .post(\"https://yalepool.com/confirm-match\", data, { headers: header })\n      .then((response) => {\n        setResponse(response);\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  }\n\n  function decline(e) {\n    e.preventDefault();\n    axios\n      .post(\"https://yalepool.com/decline-match\", data, { headers: header })\n      .then((response) => {\n        setResponse(response);\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  }\n\n  if (result) {\n    props.update();\n  }\n  if (props.needClick) {\n    return (\n      <table>\n        <tbody>\n          <tr>\n            <td>\n              <Button\n                buttonSize=\"btn--small\"\n                buttonColor=\"blue\"\n                onClick={accept}\n              >\n                Accept\n              </Button>\n            </td>\n            <td>\n              <Button\n                buttonSize=\"btn--small\"\n                buttonColor=\"blue\"\n                onClick={decline}\n              >\n                Decline\n              </Button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    );\n  } else {\n    return <div></div>;\n  }\n}\n\nfunction MatchTable(props) {\n  let trips = props.trips;\n  if (trips.length !== 0) {\n    return (\n      <div>\n        <div className=\"table_div\">\n          <h1 className=\"category\">{props.title}</h1>\n          {trips.map((trip) => (\n            <div style={{ paddingBottom: \"10px\" }}>\n              <table key={trip.groupId} className=\"match_table\">\n                <tbody>\n                  <tr>\n                    <td className=\"match_td_right\">\n                      <h3 className=\"td_title\">Request Info</h3>\n                      <p>\n                        {trip.origin} to {trip.destination}\n                      </p>\n                      <p>Departure Date: {trip.date}</p>\n                      <p>Preferred Departure Time: {trip.time}</p>\n                      <p>Preferred Group Size: {trip.preferred_group_size}</p>\n                      <p>Preferred Car Type: {trip.preferred_car_type}</p>\n                    </td>\n                    <GroupInfo header={props.header} groupId={trip.groupId} />\n                    {props.needClick && (\n                      <td className=\"match_td_left\">\n                        <DecisionBox\n                          header={props.header}\n                          update={props.update}\n                          needClick={props.needClick}\n                          netId={trip.netId}\n                          requestId={trip.requestId}\n                        />\n                      </td>\n                    )}\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n          ))}\n        </div>\n        <hr className=\"table_hr\" />\n      </div>\n    );\n  } else {\n    return <div></div>;\n  }\n}\n\nfunction WaitingTable(props) {\n  let requests = props.trips;\n  if (requests.length !== 0) {\n    return (\n      <div>\n        <div className=\"table_div\">\n          <h1 className=\"category\">{props.title}</h1>\n          {requests.map((request) => (\n            <table key={request.groupId} className=\"match_table\">\n              <tbody>\n                <tr>\n                  <td className=\"request_td\">\n                    <h3>Request Info</h3>\n                    <p>\n                      {request.origin} to {request.destination}\n                    </p>\n                    <p>Departure Date: {request.date}</p>\n                    <p>Preferred Departure Time: {request.time}</p>\n                    <p>Preferred Group Size: {request.preferred_group_size}</p>\n                    <p>Preferred Car Type: {request.preferred_car_type}</p>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n          ))}\n        </div>\n      </div>\n    );\n  } else {\n    return <div></div>;\n  }\n}\n\nfunction RideStatus(props) {\n  var netId = { netId: props.netId };\n  var header = { api_key: props.apiKey };\n\n  const [data, setData] = useState(null);\n\n  function update() {\n    //pass the netid to the api call\n    axios\n      .post(\"https://yalepool.com/get-request-status\", netId, {\n        headers: header,\n      })\n      .then((response) => {\n        setData(response); //set it!\n      })\n      .catch((error) => {\n        console.log(`Error: ${error}`);\n      });\n  }\n\n  useEffect(() => {\n    update();\n  }, []);\n  //These arrays will hold our types of trips\n  let finalizedGroup = [];\n  let awaitingUserConf = [];\n  let awaitingOtherConf = [];\n  let awaitingMatch = [];\n  if (data) {\n    data.data.forEach((trip) => {\n      if (trip.allConfirmed) {\n        finalizedGroup.push(trip);\n      } else if (trip.confirmed) {\n        awaitingOtherConf.push(trip);\n      } else if (trip.matched && !trip.confirmed) {\n        awaitingUserConf.push(trip);\n      } else if (!trip.matched) {\n        awaitingMatch.push(trip);\n      }\n    });\n  }\n\n  //Give option to request a new ride\n  let history = useHistory();\n  function GoToRequest(e) {\n    e.preventDefault();\n    history.push(\"request\");\n  }\n  //pending your conf, pending others conf\n  if(finalizedGroup.length == 0 && awaitingOtherConf.length == 0 && awaitingUserConf.length == 0 && awaitingMatch.length == 0){\n    return (\n      <div>\n        <img\n        className=\"status-img\"\n        src=\"images/exclamation_point_sign.png\"\n        alt=\"dashboard\"></img>\n        <div className=\"center_button\">\n          <Button\n            buttonColor=\"blue\"\n            onClick={GoToRequest}\n            className=\"center_button\"\n          >\n            Click Here To Request A Ride\n          </Button>\n        </div>\n      </div>\n    )\n  }\n  else{\n    return (\n      <div className=\"flex-wrapper\">\n        <Navbar />\n        <MatchTable\n          header={header}\n          trips={finalizedGroup}\n          update={update}\n          title=\"Finalized Matches\"\n          needClick={false}\n        />\n        <MatchTable\n          header={header}\n          trips={awaitingUserConf}\n          update={update}\n          title=\"Pending Your Confirmation\"\n          needClick={true}\n        />\n        <MatchTable\n          header={header}\n          trips={awaitingOtherConf}\n          update={update}\n          title=\"Pending Others' Confirmation\"\n          needClick={false}\n        />\n        <WaitingTable\n          header={header}\n          trips={awaitingMatch}\n          title=\"Waiting To Be Matched\"\n        />\n        <div className=\"center_button\">\n          <Button\n            buttonColor=\"blue\"\n            onClick={GoToRequest}\n            className=\"center_button\"\n          >\n            Click Here To Request A Ride\n          </Button>\n        </div>\n        <FooterContainer />\n      </div>\n    )\n  }\n}\n\nexport default RideStatus;\n"]},"metadata":{},"sourceType":"module"}